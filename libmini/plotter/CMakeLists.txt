# cmake build file for libMini plotter
# (c) by Stefan Roettger

PROJECT(plotter)

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

OPTION(BUILD_PLOTTER_APPS "Build applications." ON)

INCLUDE(${CMAKE_CURRENT_SOURCE_DIR}/plotter-config.cmake)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

ADD_LIBRARY(${PLOTTER_NAME} ${PLOTTER_SRCS} ${PLOTTER_HDRS})
SET_TARGET_PROPERTIES(${PLOTTER_NAME} PROPERTIES PUBLIC_HEADER "${PLOTTER_HDRS}" DEBUG_POSTFIX "d")
TARGET_LINK_LIBRARIES(${PLOTTER_NAME} ${MINI_LIBRARY})

MACRO(MAKE_PLOTTER_EXECUTABLE name)
   ADD_EXECUTABLE(${name} ${name}.cpp)
   TARGET_LINK_LIBRARIES(${name}
      ${PLOTTER_NAME}
      ${MINI_LIBRARY}
      ${OPENGL_LIBRARIES}
      ${GLUT_LIBRARY}
      )
ENDMACRO(MAKE_PLOTTER_EXECUTABLE)

IF (BUILD_PLOTTER_APPS)
   MAKE_PLOTTER_EXECUTABLE(example)
   MAKE_PLOTTER_EXECUTABLE(spiral)
   MAKE_PLOTTER_EXECUTABLE(scroll)
   MAKE_PLOTTER_EXECUTABLE(bounce)
   MAKE_PLOTTER_EXECUTABLE(koch)
   MAKE_PLOTTER_EXECUTABLE(fern)
   MAKE_PLOTTER_EXECUTABLE(julia)
ENDIF (BUILD_PLOTTER_APPS)

INSTALL(
   TARGETS ${PLOTTER_NAME}
   LIBRARY DESTINATION lib
   ARCHIVE DESTINATION lib
   PUBLIC_HEADER DESTINATION include/plotter
   )

IF (BUILD_PLOTTER_APPS)
   INSTALL(
      TARGETS example spiral scroll bounce koch fern julia
      RUNTIME DESTINATION bin
      )
ENDIF (BUILD_PLOTTER_APPS)
